
$.extend({size:function(enumerableObject){var numberOfProperties=0;$.each(enumerableObject,function(key){if(hasOwnProperty.call(enumerableObject,key)){numberOfProperties++;}});return numberOfProperties;},values:function(map){var values=[];$.each(map,function(key,value){if(hasOwnProperty.call(map,key)){values.push(value);}});return values;},bind:function(functionToCall,object){return function(){functionToCall.apply(object,arguments);};},segment:function(collection,number){var segmentedCollection=[];$.each(collection,function(i,item){if(item){segmentedCollection.push(collection.splice(0,number));}else{$.break;}});return segmentedCollection;},any:function(collection,functionToCall){return $.grep(collection,function(member){return functionToCall(member);}).length>0},shuffle:function(array){return array.sort(function(){return 0.5-Math.random();});},zip:function(arrayOne,arrayTwo){var zippedArray=[];$.each(arrayOne,function(i,item){if(arrayTwo[i]){zippedArray.push([item,arrayTwo[i]]);}});return zippedArray;}});jeffmicklos.ContactForm=function(){var contactForm=this;$('input[required]').blur(function(e){contactForm.inputHasError(e);});$('#contact').submit(function(e){contactForm.onContactSubmit(e);});};jeffmicklos.ContactForm.prototype.inputHasError=function(e){var input=$(e.target);if(input.val()===''){input.removeClass('success').addClass('error');return true;}else{input.removeClass('error').addClass('success');return false;}};jeffmicklos.ContactForm.prototype.isFormValid=function(){var inputStatus=[],contactForm=this;$.each($('input[required]'),function(i,input){inputStatus.push(contactForm.inputHasError(input));});return!($.inArray(false,inputStatus));};jeffmicklos.ContactForm.prototype.onContactSubmit=function(e){e.preventDefault();if(this.isFormValid()){$.post('ajax/contact.php',$(e.element).serialize()).success(function(data){alert('sweeet awesome thanks i love you!');});}};jeffmicklos.Painter=function(){this.imgCache=[];this.canvas=$('#paint');this.preloadImages(['images/paint/1.png','images/paint/2.png','images/paint/3.png','images/paint/4.png','images/paint/5.png']);setTimeout($.bind(this.showImage,this),1000);};jeffmicklos.Painter.prototype.preloadImages=function(images){var self=this;$.each(images,function(i,image){self.imgCache.push($('<img/>').attr('src',image).css('z-index',i));});this.imgCache.reverse();};jeffmicklos.Painter.prototype.addChildToCanvas=function(child){var extendedChild=$(child);this.canvas.append(extendedChild.hide());return extendedChild;};jeffmicklos.Painter.prototype.showImage=function showImage(){this.addChildToCanvas(this.imgCache.pop()).delay(1000).fadeIn(1000,'linear',$.bind(function(){if(this.imgCache.length){this.showImage();}},this));};jeffmicklos.SocialActivity=function(){this.getData();};jeffmicklos.SocialActivity.prototype.renderList=function(set,ol){$.each(set,function(i,item){ol.append('<li><a href="'+item.link+'">'+item.title+'</a></li>').fadeIn();});};jeffmicklos.SocialActivity.prototype.getData=function(){var self=this;$.getJSON('http://pipes.yahoo.com/pipes/pipe.run?_id=587079d7c36cbda98f7127351a437076&_render=json',function(data){var segments=$.segment(data.value.items,5);var ols=[$('#list-lastfm'),$('#list-google'),$('#list-flickr')];$.each(segments,function(i,item){self.renderList(item,ols[i].empty());});});};jeffmicklos.Gallery=function(){this.thumbnailContainerSelector='a[class^=flickr-thumb]';this.numberOfPhotosToShow=3;this.getData();};jeffmicklos.Gallery.prototype.handleData=function(data){var photos=$.shuffle(data.query.results.photo);var selectedPhotos=photos.slice(0,this.numberOfPhotosToShow);var photosAndContainers=$.zip(selectedPhotos,$(this.thumbnailContainerSelector));this.renderPhotos(photosAndContainers);};jeffmicklos.Gallery.prototype.renderPhotos=function(photosAndContainers){var iterator=function iterator(i){if(photosAndContainers[i]){var tuple=photosAndContainers[i];var photo=tuple[0];var container=tuple[1];var photoElement=$('<img/>').attr('src',photo.url_m);$(container).attr('href',photo.url_l);$(container).append(photoElement);photoElement.hide().delay(1000).fadeIn();iterator(i+1);}}(0);jeffmicklos.Util.setupLightbox();};jeffmicklos.Gallery.prototype.getData=function(){var data={"query":{"count":40,"created":"2011-09-10T05:25:17Z","lang":"en-US","diagnostics":{"publiclyCallable":"true","url":{"execution-start-time":"0","execution-stop-time":"300","execution-time":"300","content":"http://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&photoset_id=72157627628558120&extras=url_m%2curl_l&page=1&per_page=40"},"user-time":"301","service-time":"300","build-version":"21220"},"results":{"photo":[{"farm":"7","height_l":"540","height_m":"338","id":"6091548381","isprimary":"1","secret":"3790f58df7","server":"6075","title":"mark_joe","url_l":"http://farm7.static.flickr.com/6075/6091548381_3790f58df7_b.jpg","url_m":"http://farm7.static.flickr.com/6075/6091548381_3790f58df7.jpg","width_l":"800","width_m":"500"},{"farm":"7","height_l":"540","height_m":"338","id":"5996311269","isprimary":"0","secret":"cb2e93b905","server":"6141","title":"boat_magnify","url_l":"http://farm7.static.flickr.com/6141/5996311269_cb2e93b905_b.jpg","url_m":"http://farm7.static.flickr.com/6141/5996311269_cb2e93b905.jpg","width_l":"800","width_m":"500"},{"farm":"7","height_l":"540","height_m":"338","id":"5996310721","isprimary":"0","secret":"ddcf870413","server":"6029","title":"coffee","url_l":"http://farm7.static.flickr.com/6029/5996310721_ddcf870413_b.jpg","url_m":"http://farm7.static.flickr.com/6029/5996310721_ddcf870413.jpg","width_l":"800","width_m":"500"},{"farm":"7","height_l":"540","height_m":"338","id":"5996310549","isprimary":"0","secret":"f2f99ab862","server":"6006","title":"alexpsd","url_l":"http://farm7.static.flickr.com/6006/5996310549_f2f99ab862_b.jpg","url_m":"http://farm7.static.flickr.com/6006/5996310549_f2f99ab862.jpg","width_l":"800","width_m":"500"},{"farm":"7","height_l":"540","height_m":"338","id":"5996310241","isprimary":"0","secret":"0b36b460d7","server":"6121","title":"matrix","url_l":"http://farm7.static.flickr.com/6121/5996310241_0b36b460d7_b.jpg","url_m":"http://farm7.static.flickr.com/6121/5996310241_0b36b460d7.jpg","width_l":"800","width_m":"500"},{"farm":"7","height_l":"540","height_m":"338","id":"5996310147","isprimary":"0","secret":"2be0af3ab5","server":"6124","title":"alex_2","url_l":"http://farm7.static.flickr.com/6124/5996310147_2be0af3ab5_b.jpg","url_m":"http://farm7.static.flickr.com/6124/5996310147_2be0af3ab5.jpg","width_l":"800","width_m":"500"},{"farm":"7","height_l":"540","height_m":"338","id":"5996864510","isprimary":"0","secret":"03bc72e60e","server":"6004","title":"boats","url_l":"http://farm7.static.flickr.com/6004/5996864510_03bc72e60e_b.jpg","url_m":"http://farm7.static.flickr.com/6004/5996864510_03bc72e60e.jpg","width_l":"800","width_m":"500"},{"farm":"7","height_l":"540","height_m":"338","id":"5996864186","isprimary":"0","secret":"924d55378b","server":"6002","title":"oliver_jason","url_l":"http://farm7.static.flickr.com/6002/5996864186_924d55378b_b.jpg","url_m":"http://farm7.static.flickr.com/6002/5996864186_924d55378b.jpg","width_l":"800","width_m":"500"},{"farm":"7","height_l":"540","height_m":"338","id":"5949125775","isprimary":"0","secret":"b75bbfd965","server":"6021","title":"annie_arm","url_l":"http://farm7.static.flickr.com/6021/5949125775_b75bbfd965_b.jpg","url_m":"http://farm7.static.flickr.com/6021/5949125775_b75bbfd965.jpg","width_l":"800","width_m":"500"},{"farm":"7","height_l":"540","height_m":"338","id":"5949682050","isprimary":"0","secret":"2fcd546391","server":"6131","title":"joe_soda","url_l":"http://farm7.static.flickr.com/6131/5949682050_2fcd546391_b.jpg","url_m":"http://farm7.static.flickr.com/6131/5949682050_2fcd546391.jpg","width_l":"800","width_m":"500"},{"farm":"7","height_l":"540","height_m":"338","id":"5949681976","isprimary":"0","secret":"e78f67c43b","server":"6003","title":"burdock","url_l":"http://farm7.static.flickr.com/6003/5949681976_e78f67c43b_b.jpg","url_m":"http://farm7.static.flickr.com/6003/5949681976_e78f67c43b.jpg","width_l":"800","width_m":"500"},{"farm":"7","height_l":"540","height_m":"338","id":"5913780734","isprimary":"0","secret":"dcc357cc73","server":"6006","title":"boz","url_l":"http://farm7.static.flickr.com/6006/5913780734_dcc357cc73_b.jpg","url_m":"http://farm7.static.flickr.com/6006/5913780734_dcc357cc73.jpg","width_l":"800","width_m":"500"},{"farm":"7","height_l":"540","height_m":"338","id":"5913780618","isprimary":"0","secret":"2b3513d731","server":"6008","title":"mark_molly","url_l":"http://farm7.static.flickr.com/6008/5913780618_2b3513d731_b.jpg","url_m":"http://farm7.static.flickr.com/6008/5913780618_2b3513d731.jpg","width_l":"800","width_m":"500"},{"farm":"7","height_l":"540","height_m":"338","id":"5913780448","isprimary":"0","secret":"20891b8fe0","server":"6029","title":"kat","url_l":"http://farm7.static.flickr.com/6029/5913780448_20891b8fe0_b.jpg","url_m":"http://farm7.static.flickr.com/6029/5913780448_20891b8fe0.jpg","width_l":"800","width_m":"500"},{"farm":"7","height_l":"540","height_m":"338","id":"5913780316","isprimary":"0","secret":"399d6fd43a","server":"6024","title":"sightglass","url_l":"http://farm7.static.flickr.com/6024/5913780316_399d6fd43a_b.jpg","url_m":"http://farm7.static.flickr.com/6024/5913780316_399d6fd43a.jpg","width_l":"800","width_m":"500"},{"farm":"4","height_l":"540","height_m":"338","id":"5782690314","isprimary":"0","secret":"ed9e0e92eb","server":"3393","title":"jackson_hyde","url_l":"http://farm4.static.flickr.com/3393/5782690314_ed9e0e92eb_b.jpg","url_m":"http://farm4.static.flickr.com/3393/5782690314_ed9e0e92eb.jpg","width_l":"800","width_m":"500"},{"farm":"4","height_l":"540","height_m":"338","id":"5727306827","isprimary":"0","secret":"1e9a8f2660","server":"3551","title":"evan","url_l":"http://farm4.static.flickr.com/3551/5727306827_1e9a8f2660_b.jpg","url_m":"http://farm4.static.flickr.com/3551/5727306827_1e9a8f2660.jpg","width_l":"800","width_m":"500"},{"farm":"3","height_l":"540","height_m":"338","id":"5727306199","isprimary":"0","secret":"74c8831fe9","server":"2184","title":"peter","url_l":"http://farm3.static.flickr.com/2184/5727306199_74c8831fe9_b.jpg","url_m":"http://farm3.static.flickr.com/2184/5727306199_74c8831fe9.jpg","width_l":"800","width_m":"500"},{"farm":"6","height_l":"800","height_m":"500","id":"5692003836","isprimary":"0","secret":"95c327361d","server":"5025","title":"sf_f21","url_l":"http://farm6.static.flickr.com/5025/5692003836_95c327361d_b.jpg","url_m":"http://farm6.static.flickr.com/5025/5692003836_95c327361d.jpg","width_l":"519","width_m":"324"},{"farm":"6","height_l":"531","height_m":"332","id":"5686034340","isprimary":"0","secret":"c125fcf3e1","server":"5187","title":"joe_camera","url_l":"http://farm6.static.flickr.com/5187/5686034340_c125fcf3e1_b.jpg","url_m":"http://farm6.static.flickr.com/5187/5686034340_c125fcf3e1.jpg","width_l":"800","width_m":"500"},{"farm":"6","height_l":"530","height_m":"331","id":"5686034224","isprimary":"0","secret":"c90a835a9e","server":"5282","title":"yerba","url_l":"http://farm6.static.flickr.com/5282/5686034224_c90a835a9e_b.jpg","url_m":"http://farm6.static.flickr.com/5282/5686034224_c90a835a9e.jpg","width_l":"800","width_m":"500"},{"farm":"6","height_l":"531","height_m":"332","id":"5685465121","isprimary":"0","secret":"ee07cdc80a","server":"5030","title":"balboa_2","url_l":"http://farm6.static.flickr.com/5030/5685465121_ee07cdc80a_b.jpg","url_m":"http://farm6.static.flickr.com/5030/5685465121_ee07cdc80a.jpg","width_l":"800","width_m":"500"},{"farm":"6","height_l":"800","height_m":"500","id":"5686033932","isprimary":"0","secret":"461640c30d","server":"5270","title":"condor","url_l":"http://farm6.static.flickr.com/5270/5686033932_461640c30d_b.jpg","url_m":"http://farm6.static.flickr.com/5270/5686033932_461640c30d.jpg","width_l":"530","width_m":"331"},{"farm":"6","height_l":"700","height_m":"500","id":"5686033838","isprimary":"0","secret":"7ea793c13d","server":"5066","title":"washington_square","url_l":"http://farm6.static.flickr.com/5066/5686033838_7ea793c13d_b.jpg","url_m":"http://farm6.static.flickr.com/5066/5686033838_7ea793c13d.jpg","width_l":"470","width_m":"336"},{"farm":"6","height_l":"534","height_m":"334","id":"5473303800","isprimary":"0","secret":"dcf9409cb8","server":"5013","title":"peter_ben","url_l":"http://farm6.static.flickr.com/5013/5473303800_dcf9409cb8_b.jpg","url_m":"http://farm6.static.flickr.com/5013/5473303800_dcf9409cb8.jpg","width_l":"800","width_m":"500"},{"farm":"5","height_l":"530","height_m":"331","id":"4965254010","isprimary":"0","secret":"51fb50d4ce","server":"4125","title":"sabin","url_l":"http://farm5.static.flickr.com/4125/4965254010_51fb50d4ce_b.jpg","url_m":"http://farm5.static.flickr.com/4125/4965254010_51fb50d4ce.jpg","width_l":"800","width_m":"500"},{"farm":"5","height_l":"531","height_m":"332","id":"4964652713","isprimary":"0","secret":"775d5bafa6","server":"4086","title":"boxes","url_l":"http://farm5.static.flickr.com/4086/4964652713_775d5bafa6_b.jpg","url_m":"http://farm5.static.flickr.com/4086/4964652713_775d5bafa6.jpg","width_l":"800","width_m":"500"},{"farm":"5","height_l":"531","height_m":"332","id":"4964651361","isprimary":"0","secret":"0d1256e262","server":"4153","title":"joe_huntington","url_l":"http://farm5.static.flickr.com/4153/4964651361_0d1256e262_b.jpg","url_m":"http://farm5.static.flickr.com/4153/4964651361_0d1256e262.jpg","width_l":"800","width_m":"500"},{"farm":"5","height_l":"531","height_m":"332","id":"4965252084","isprimary":"0","secret":"797c1c1d6f","server":"4125","title":"corner","url_l":"http://farm5.static.flickr.com/4125/4965252084_797c1c1d6f_b.jpg","url_m":"http://farm5.static.flickr.com/4125/4965252084_797c1c1d6f.jpg","width_l":"800","width_m":"500"},{"farm":"5","height_l":"530","height_m":"331","id":"4950009403","isprimary":"0","secret":"e35b0c94d9","server":"4081","title":"9th","url_l":"http://farm5.static.flickr.com/4081/4950009403_e35b0c94d9_b.jpg","url_m":"http://farm5.static.flickr.com/4081/4950009403_e35b0c94d9.jpg","width_l":"800","width_m":"500"},{"farm":"5","height_l":"530","height_m":"331","id":"4950009363","isprimary":"0","secret":"ecc83a33b9","server":"4087","title":"annie_craftfair","url_l":"http://farm5.static.flickr.com/4087/4950009363_ecc83a33b9_b.jpg","url_m":"http://farm5.static.flickr.com/4087/4950009363_ecc83a33b9.jpg","width_l":"800","width_m":"500"},{"farm":"5","height_m":"333","id":"4494473973","isprimary":"0","secret":"8f26edb400","server":"4040","title":"joe_car","url_m":"http://farm5.static.flickr.com/4040/4494473973_8f26edb400.jpg","width_m":"500"},{"farm":"3","height_m":"500","id":"4415236032","isprimary":"0","secret":"2ba1951d2d","server":"2693","title":"stockon_film","url_m":"http://farm3.static.flickr.com/2693/4415236032_2ba1951d2d.jpg","width_m":"500"},{"farm":"5","height_m":"315","id":"4414468233","isprimary":"0","secret":"b6db4c7f23","server":"4067","title":"joe_hillcrest_film","url_m":"http://farm5.static.flickr.com/4067/4414468233_b6db4c7f23.jpg","width_m":"500"},{"farm":"5","height_m":"332","id":"4415235736","isprimary":"0","secret":"53f59b8a03","server":"4007","title":"chris_disneyland_2","url_m":"http://farm5.static.flickr.com/4007/4415235736_53f59b8a03.jpg","width_m":"500"},{"farm":"5","height_m":"332","id":"4415235672","isprimary":"0","secret":"df1785bcae","server":"4013","title":"chris_disneyland","url_m":"http://farm5.static.flickr.com/4013/4415235672_df1785bcae.jpg","width_m":"500"},{"farm":"5","height_m":"332","id":"4414467223","isprimary":"0","secret":"18344e082b","server":"4022","title":"balboapark_film","url_m":"http://farm5.static.flickr.com/4022/4414467223_18344e082b.jpg","width_m":"500"},{"farm":"5","height_m":"283","id":"4415234676","isprimary":"0","secret":"2d903730c5","server":"4006","title":"annie-film","url_m":"http://farm5.static.flickr.com/4006/4415234676_2d903730c5.jpg","width_m":"500"},{"farm":"5","height_m":"332","id":"4412389324","isprimary":"0","secret":"4908d72b09","server":"4060","title":"sammies","url_m":"http://farm5.static.flickr.com/4060/4412389324_4908d72b09.jpg","width_m":"500"},{"farm":"5","height_m":"334","id":"4411620471","isprimary":"0","secret":"9c555cd7e6","server":"4035","title":"durand","url_m":"http://farm5.static.flickr.com/4035/4411620471_9c555cd7e6.jpg","width_m":"500"}]}}};this.handleData(data);};jeffmicklos.Util={setupLightbox:function(selector,options){var defaultSelector='a[rel=lightbox]';var defaultOptions={'titlePosition':'inside','centerOnScroll':true};var selector=selector||defaultSelector;var settings=$.extend({},defaultOptions,options);$(selector).fancybox(settings);}};;(function($){var tmp,loading,overlay,wrap,outer,content,close,title,nav_left,nav_right,selectedIndex=0,selectedOpts={},selectedArray=[],currentIndex=0,currentOpts={},currentArray=[],ajaxLoader=null,imgPreloader=new Image(),imgRegExp=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,swfRegExp=/[^\.]\.(swf)\s*$/i,loadingTimer,loadingFrame=1,titleHeight=0,titleStr='',start_pos,final_pos,busy=false,fx=$.extend($('<div/>')[0],{prop:0}),isIE6=$.browser.msie&&$.browser.version<7&&!window.XMLHttpRequest,_abort=function(){loading.hide();imgPreloader.onerror=imgPreloader.onload=null;if(ajaxLoader){ajaxLoader.abort();}
tmp.empty();},_error=function(){if(false===selectedOpts.onError(selectedArray,selectedIndex,selectedOpts)){loading.hide();busy=false;return;}
selectedOpts.titleShow=false;selectedOpts.width='auto';selectedOpts.height='auto';tmp.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>');_process_inline();},_start=function(){var obj=selectedArray[selectedIndex],href,type,title,str,emb,ret;_abort();selectedOpts=$.extend({},$.fn.fancybox.defaults,(typeof $(obj).data('fancybox')=='undefined'?selectedOpts:$(obj).data('fancybox')));ret=selectedOpts.onStart(selectedArray,selectedIndex,selectedOpts);if(ret===false){busy=false;return;}else if(typeof ret=='object'){selectedOpts=$.extend(selectedOpts,ret);}
title=selectedOpts.title||(obj.nodeName?$(obj).attr('title'):obj.title)||'';if(obj.nodeName&&!selectedOpts.orig){selectedOpts.orig=$(obj).children("img:first").length?$(obj).children("img:first"):$(obj);}
if(title===''&&selectedOpts.orig&&selectedOpts.titleFromAlt){title=selectedOpts.orig.attr('alt');}
href=selectedOpts.href||(obj.nodeName?$(obj).attr('href'):obj.href)||null;if((/^(?:javascript)/i).test(href)||href=='#'){href=null;}
if(selectedOpts.type){type=selectedOpts.type;if(!href){href=selectedOpts.content;}}else if(selectedOpts.content){type='html';}else if(href){if(href.match(imgRegExp)){type='image';}else if(href.match(swfRegExp)){type='swf';}else if($(obj).hasClass("iframe")){type='iframe';}else if(href.indexOf("#")===0){type='inline';}else{type='ajax';}}
if(!type){_error();return;}
if(type=='inline'){obj=href.substr(href.indexOf("#"));type=$(obj).length>0?'inline':'ajax';}
selectedOpts.type=type;selectedOpts.href=href;selectedOpts.title=title;if(selectedOpts.autoDimensions){if(selectedOpts.type=='html'||selectedOpts.type=='inline'||selectedOpts.type=='ajax'){selectedOpts.width='auto';selectedOpts.height='auto';}else{selectedOpts.autoDimensions=false;}}
if(selectedOpts.modal){selectedOpts.overlayShow=true;selectedOpts.hideOnOverlayClick=false;selectedOpts.hideOnContentClick=false;selectedOpts.enableEscapeButton=false;selectedOpts.showCloseButton=false;}
selectedOpts.padding=parseInt(selectedOpts.padding,10);selectedOpts.margin=parseInt(selectedOpts.margin,10);tmp.css('padding',(selectedOpts.padding+selectedOpts.margin));$('.fancybox-inline-tmp').unbind('fancybox-cancel').bind('fancybox-change',function(){$(this).replaceWith(content.children());});switch(type){case'html':tmp.html(selectedOpts.content);_process_inline();break;case'inline':if($(obj).parent().is('#fancybox-content')===true){busy=false;return;}
$('<div class="fancybox-inline-tmp" />').hide().insertBefore($(obj)).bind('fancybox-cleanup',function(){$(this).replaceWith(content.children());}).bind('fancybox-cancel',function(){$(this).replaceWith(tmp.children());});$(obj).appendTo(tmp);_process_inline();break;case'image':busy=false;$.fancybox.showActivity();imgPreloader=new Image();imgPreloader.onerror=function(){_error();};imgPreloader.onload=function(){busy=true;imgPreloader.onerror=imgPreloader.onload=null;_process_image();};imgPreloader.src=href;break;case'swf':selectedOpts.scrolling='no';str='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+selectedOpts.width+'" height="'+selectedOpts.height+'"><param name="movie" value="'+href+'"></param>';emb='';$.each(selectedOpts.swf,function(name,val){str+='<param name="'+name+'" value="'+val+'"></param>';emb+=' '+name+'="'+val+'"';});str+='<embed src="'+href+'" type="application/x-shockwave-flash" width="'+selectedOpts.width+'" height="'+selectedOpts.height+'"'+emb+'></embed></object>';tmp.html(str);_process_inline();break;case'ajax':busy=false;$.fancybox.showActivity();selectedOpts.ajax.win=selectedOpts.ajax.success;ajaxLoader=$.ajax($.extend({},selectedOpts.ajax,{url:href,data:selectedOpts.ajax.data||{},error:function(XMLHttpRequest,textStatus,errorThrown){if(XMLHttpRequest.status>0){_error();}},success:function(data,textStatus,XMLHttpRequest){var o=typeof XMLHttpRequest=='object'?XMLHttpRequest:ajaxLoader;if(o.status==200){if(typeof selectedOpts.ajax.win=='function'){ret=selectedOpts.ajax.win(href,data,textStatus,XMLHttpRequest);if(ret===false){loading.hide();return;}else if(typeof ret=='string'||typeof ret=='object'){data=ret;}}
tmp.html(data);_process_inline();}}}));break;case'iframe':_show();break;}},_process_inline=function(){var
w=selectedOpts.width,h=selectedOpts.height;if(w.toString().indexOf('%')>-1){w=parseInt(($(window).width()-(selectedOpts.margin*2))*parseFloat(w)/100,10)+'px';}else{w=w=='auto'?'auto':w+'px';}
if(h.toString().indexOf('%')>-1){h=parseInt(($(window).height()-(selectedOpts.margin*2))*parseFloat(h)/100,10)+'px';}else{h=h=='auto'?'auto':h+'px';}
tmp.wrapInner('<div style="width:'+w+';height:'+h+';overflow: '+(selectedOpts.scrolling=='auto'?'auto':(selectedOpts.scrolling=='yes'?'scroll':'hidden'))+';position:relative;"></div>');selectedOpts.width=tmp.width();selectedOpts.height=tmp.height();_show();},_process_image=function(){selectedOpts.width=imgPreloader.width;selectedOpts.height=imgPreloader.height;$("<img />").attr({'id':'fancybox-img','src':imgPreloader.src,'alt':selectedOpts.title}).appendTo(tmp);_show();},_show=function(){var pos,equal;loading.hide();if(wrap.is(":visible")&&false===currentOpts.onCleanup(currentArray,currentIndex,currentOpts)){$.event.trigger('fancybox-cancel');busy=false;return;}
busy=true;$(content.add(overlay)).unbind();$(window).unbind("resize.fb scroll.fb");$(document).unbind('keydown.fb');if(wrap.is(":visible")&&currentOpts.titlePosition!=='outside'){wrap.css('height',wrap.height());}
currentArray=selectedArray;currentIndex=selectedIndex;currentOpts=selectedOpts;if(currentOpts.overlayShow){overlay.css({'background-color':currentOpts.overlayColor,'opacity':currentOpts.overlayOpacity,'cursor':currentOpts.hideOnOverlayClick?'pointer':'auto','height':$(document).height()});if(!overlay.is(':visible')){if(isIE6){$('select:not(#fancybox-tmp select)').filter(function(){return this.style.visibility!=='hidden';}).css({'visibility':'hidden'}).one('fancybox-cleanup',function(){this.style.visibility='inherit';});}
overlay.show();}}else{overlay.hide();}
final_pos=_get_zoom_to();_process_title();if(wrap.is(":visible")){$(close.add(nav_left).add(nav_right)).hide();pos=wrap.position(),start_pos={top:pos.top,left:pos.left,width:wrap.width(),height:wrap.height()};equal=(start_pos.width==final_pos.width&&start_pos.height==final_pos.height);content.fadeTo(currentOpts.changeFade,0.3,function(){var finish_resizing=function(){content.html(tmp.contents()).fadeTo(currentOpts.changeFade,1,_finish);};$.event.trigger('fancybox-change');content.empty().removeAttr('filter').css({'border-width':currentOpts.padding,'width':final_pos.width-currentOpts.padding*2,'height':selectedOpts.autoDimensions?'auto':final_pos.height-titleHeight-currentOpts.padding*2});if(equal){finish_resizing();}else{fx.prop=0;$(fx).animate({prop:1},{duration:currentOpts.changeSpeed,easing:currentOpts.easingChange,step:_draw,complete:finish_resizing});}});return;}
wrap.removeAttr("style");content.css('border-width',currentOpts.padding);if(currentOpts.transitionIn=='elastic'){start_pos=_get_zoom_from();content.html(tmp.contents());wrap.show();if(currentOpts.opacity){final_pos.opacity=0;}
fx.prop=0;$(fx).animate({prop:1},{duration:currentOpts.speedIn,easing:currentOpts.easingIn,step:_draw,complete:_finish});return;}
if(currentOpts.titlePosition=='inside'&&titleHeight>0){title.show();}
content.css({'width':final_pos.width-currentOpts.padding*2,'height':selectedOpts.autoDimensions?'auto':final_pos.height-titleHeight-currentOpts.padding*2}).html(tmp.contents());wrap.css(final_pos).fadeIn(currentOpts.transitionIn=='none'?0:currentOpts.speedIn,_finish);},_format_title=function(title){if(title&&title.length){if(currentOpts.titlePosition=='float'){return'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+title+'</td><td id="fancybox-title-float-right"></td></tr></table>';}
return'<div id="fancybox-title-'+currentOpts.titlePosition+'">'+title+'</div>';}
return false;},_process_title=function(){titleStr=currentOpts.title||'';titleHeight=0;title.empty().removeAttr('style').removeClass();if(currentOpts.titleShow===false){title.hide();return;}
titleStr=$.isFunction(currentOpts.titleFormat)?currentOpts.titleFormat(titleStr,currentArray,currentIndex,currentOpts):_format_title(titleStr);if(!titleStr||titleStr===''){title.hide();return;}
title.addClass('fancybox-title-'+currentOpts.titlePosition).html(titleStr).appendTo('body').show();switch(currentOpts.titlePosition){case'inside':title.css({'width':final_pos.width-(currentOpts.padding*2),'marginLeft':currentOpts.padding,'marginRight':currentOpts.padding});titleHeight=title.outerHeight(true);title.appendTo(outer);final_pos.height+=titleHeight;break;case'over':title.css({'marginLeft':currentOpts.padding,'width':final_pos.width-(currentOpts.padding*2),'bottom':currentOpts.padding}).appendTo(outer);break;case'float':title.css('left',parseInt((title.width()-final_pos.width-40)/2,10)*-1).appendTo(wrap);break;default:title.css({'width':final_pos.width-(currentOpts.padding*2),'paddingLeft':currentOpts.padding,'paddingRight':currentOpts.padding}).appendTo(wrap);break;}
title.hide();},_set_navigation=function(){if(currentOpts.enableEscapeButton||currentOpts.enableKeyboardNav){$(document).bind('keydown.fb',function(e){if(e.keyCode==27&&currentOpts.enableEscapeButton){e.preventDefault();$.fancybox.close();}else if((e.keyCode==37||e.keyCode==39)&&currentOpts.enableKeyboardNav&&e.target.tagName!=='INPUT'&&e.target.tagName!=='TEXTAREA'&&e.target.tagName!=='SELECT'){e.preventDefault();$.fancybox[e.keyCode==37?'prev':'next']();}});}
if(!currentOpts.showNavArrows){nav_left.hide();nav_right.hide();return;}
if((currentOpts.cyclic&&currentArray.length>1)||currentIndex!==0){nav_left.show();}
if((currentOpts.cyclic&&currentArray.length>1)||currentIndex!=(currentArray.length-1)){nav_right.show();}},_finish=function(){if(!$.support.opacity){content.get(0).style.removeAttribute('filter');wrap.get(0).style.removeAttribute('filter');}
if(selectedOpts.autoDimensions){content.css('height','auto');}
wrap.css('height','auto');if(titleStr&&titleStr.length){title.show();}
if(currentOpts.showCloseButton){close.show();}
_set_navigation();if(currentOpts.hideOnContentClick){content.bind('click',$.fancybox.close);}
if(currentOpts.hideOnOverlayClick){overlay.bind('click',$.fancybox.close);}
$(window).bind("resize.fb",$.fancybox.resize);if(currentOpts.centerOnScroll){$(window).bind("scroll.fb",$.fancybox.center);}
if(currentOpts.type=='iframe'){$('<iframe id="fancybox-frame" name="fancybox-frame'+new Date().getTime()+'" frameborder="0" hspace="0" '+($.browser.msie?'allowtransparency="true""':'')+' scrolling="'+selectedOpts.scrolling+'" src="'+currentOpts.href+'"></iframe>').appendTo(content);}
wrap.show();busy=false;$.fancybox.center();currentOpts.onComplete(currentArray,currentIndex,currentOpts);_preload_images();},_preload_images=function(){var href,objNext;if((currentArray.length-1)>currentIndex){href=currentArray[currentIndex+1].href;if(typeof href!=='undefined'&&href.match(imgRegExp)){objNext=new Image();objNext.src=href;}}
if(currentIndex>0){href=currentArray[currentIndex-1].href;if(typeof href!=='undefined'&&href.match(imgRegExp)){objNext=new Image();objNext.src=href;}}},_draw=function(pos){var dim={width:parseInt(start_pos.width+(final_pos.width-start_pos.width)*pos,10),height:parseInt(start_pos.height+(final_pos.height-start_pos.height)*pos,10),top:parseInt(start_pos.top+(final_pos.top-start_pos.top)*pos,10),left:parseInt(start_pos.left+(final_pos.left-start_pos.left)*pos,10)};if(typeof final_pos.opacity!=='undefined'){dim.opacity=pos<0.5?0.5:pos;}
wrap.css(dim);content.css({'width':dim.width-currentOpts.padding*2,'height':dim.height-(titleHeight*pos)-currentOpts.padding*2});},_get_viewport=function(){return[$(window).width()-(currentOpts.margin*2),$(window).height()-(currentOpts.margin*2),$(document).scrollLeft()+currentOpts.margin,$(document).scrollTop()+currentOpts.margin];},_get_zoom_to=function(){var view=_get_viewport(),to={},resize=currentOpts.autoScale,double_padding=currentOpts.padding*2,ratio;if(currentOpts.width.toString().indexOf('%')>-1){to.width=parseInt((view[0]*parseFloat(currentOpts.width))/100,10);}else{to.width=currentOpts.width+double_padding;}
if(currentOpts.height.toString().indexOf('%')>-1){to.height=parseInt((view[1]*parseFloat(currentOpts.height))/100,10);}else{to.height=currentOpts.height+double_padding;}
if(resize&&(to.width>view[0]||to.height>view[1])){if(selectedOpts.type=='image'||selectedOpts.type=='swf'){ratio=(currentOpts.width)/(currentOpts.height);if((to.width)>view[0]){to.width=view[0];to.height=parseInt(((to.width-double_padding)/ratio)+double_padding,10);}
if((to.height)>view[1]){to.height=view[1];to.width=parseInt(((to.height-double_padding)*ratio)+double_padding,10);}}else{to.width=Math.min(to.width,view[0]);to.height=Math.min(to.height,view[1]);}}
to.top=parseInt(Math.max(view[3]-20,view[3]+((view[1]-to.height-40)*0.5)),10);to.left=parseInt(Math.max(view[2]-20,view[2]+((view[0]-to.width-40)*0.5)),10);return to;},_get_obj_pos=function(obj){var pos=obj.offset();pos.top+=parseInt(obj.css('paddingTop'),10)||0;pos.left+=parseInt(obj.css('paddingLeft'),10)||0;pos.top+=parseInt(obj.css('border-top-width'),10)||0;pos.left+=parseInt(obj.css('border-left-width'),10)||0;pos.width=obj.width();pos.height=obj.height();return pos;},_get_zoom_from=function(){var orig=selectedOpts.orig?$(selectedOpts.orig):false,from={},pos,view;if(orig&&orig.length){pos=_get_obj_pos(orig);from={width:pos.width+(currentOpts.padding*2),height:pos.height+(currentOpts.padding*2),top:pos.top-currentOpts.padding-20,left:pos.left-currentOpts.padding-20};}else{view=_get_viewport();from={width:currentOpts.padding*2,height:currentOpts.padding*2,top:parseInt(view[3]+view[1]*0.5,10),left:parseInt(view[2]+view[0]*0.5,10)};}
return from;},_animate_loading=function(){if(!loading.is(':visible')){clearInterval(loadingTimer);return;}
$('div',loading).css('top',(loadingFrame*-40)+'px');loadingFrame=(loadingFrame+1)%12;};$.fn.fancybox=function(options){if(!$(this).length){return this;}
$(this).data('fancybox',$.extend({},options,($.metadata?$(this).metadata():{}))).unbind('click.fb').bind('click.fb',function(e){e.preventDefault();if(busy){return;}
busy=true;$(this).blur();selectedArray=[];selectedIndex=0;var rel=$(this).attr('rel')||'';if(!rel||rel==''||rel==='nofollow'){selectedArray.push(this);}else{selectedArray=$("a[rel="+rel+"], area[rel="+rel+"]");selectedIndex=selectedArray.index(this);}
_start();return;});return this;};$.fancybox=function(obj){var opts;if(busy){return;}
busy=true;opts=typeof arguments[1]!=='undefined'?arguments[1]:{};selectedArray=[];selectedIndex=parseInt(opts.index,10)||0;if($.isArray(obj)){for(var i=0,j=obj.length;i<j;i++){if(typeof obj[i]=='object'){$(obj[i]).data('fancybox',$.extend({},opts,obj[i]));}else{obj[i]=$({}).data('fancybox',$.extend({content:obj[i]},opts));}}
selectedArray=jQuery.merge(selectedArray,obj);}else{if(typeof obj=='object'){$(obj).data('fancybox',$.extend({},opts,obj));}else{obj=$({}).data('fancybox',$.extend({content:obj},opts));}
selectedArray.push(obj);}
if(selectedIndex>selectedArray.length||selectedIndex<0){selectedIndex=0;}
_start();};$.fancybox.showActivity=function(){clearInterval(loadingTimer);loading.show();loadingTimer=setInterval(_animate_loading,66);};$.fancybox.hideActivity=function(){loading.hide();};$.fancybox.next=function(){return $.fancybox.pos(currentIndex+1);};$.fancybox.prev=function(){return $.fancybox.pos(currentIndex-1);};$.fancybox.pos=function(pos){if(busy){return;}
pos=parseInt(pos);selectedArray=currentArray;if(pos>-1&&pos<currentArray.length){selectedIndex=pos;_start();}else if(currentOpts.cyclic&&currentArray.length>1){selectedIndex=pos>=currentArray.length?0:currentArray.length-1;_start();}
return;};$.fancybox.cancel=function(){if(busy){return;}
busy=true;$.event.trigger('fancybox-cancel');_abort();selectedOpts.onCancel(selectedArray,selectedIndex,selectedOpts);busy=false;};$.fancybox.close=function(){if(busy||wrap.is(':hidden')){return;}
busy=true;if(currentOpts&&false===currentOpts.onCleanup(currentArray,currentIndex,currentOpts)){busy=false;return;}
_abort();$(close.add(nav_left).add(nav_right)).hide();$(content.add(overlay)).unbind();$(window).unbind("resize.fb scroll.fb");$(document).unbind('keydown.fb');content.find('iframe').attr('src',isIE6&&/^https/i.test(window.location.href||'')?'javascript:void(false)':'about:blank');if(currentOpts.titlePosition!=='inside'){title.empty();}
wrap.stop();function _cleanup(){overlay.fadeOut('fast');title.empty().hide();wrap.hide();$.event.trigger('fancybox-cleanup');content.empty();currentOpts.onClosed(currentArray,currentIndex,currentOpts);currentArray=selectedOpts=[];currentIndex=selectedIndex=0;currentOpts=selectedOpts={};busy=false;}
if(currentOpts.transitionOut=='elastic'){start_pos=_get_zoom_from();var pos=wrap.position();final_pos={top:pos.top,left:pos.left,width:wrap.width(),height:wrap.height()};if(currentOpts.opacity){final_pos.opacity=1;}
title.empty().hide();fx.prop=1;$(fx).animate({prop:0},{duration:currentOpts.speedOut,easing:currentOpts.easingOut,step:_draw,complete:_cleanup});}else{wrap.fadeOut(currentOpts.transitionOut=='none'?0:currentOpts.speedOut,_cleanup);}};$.fancybox.resize=function(){if(overlay.is(':visible')){overlay.css('height',$(document).height());}
$.fancybox.center(true);};$.fancybox.center=function(){var view,align;if(busy){return;}
align=arguments[0]===true?1:0;view=_get_viewport();if(!align&&(wrap.width()>view[0]||wrap.height()>view[1])){return;}
wrap.stop().animate({'top':parseInt(Math.max(view[3]-20,view[3]+((view[1]-content.height()-40)*0.5)-currentOpts.padding)),'left':parseInt(Math.max(view[2]-20,view[2]+((view[0]-content.width()-40)*0.5)-currentOpts.padding))},typeof arguments[0]=='number'?arguments[0]:200);};$.fancybox.init=function(){if($("#fancybox-wrap").length){return;}
$('body').append(tmp=$('<div id="fancybox-tmp"></div>'),loading=$('<div id="fancybox-loading"><div></div></div>'),overlay=$('<div id="fancybox-overlay"></div>'),wrap=$('<div id="fancybox-wrap"></div>'));outer=$('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(wrap);outer.append(content=$('<div id="fancybox-content"></div>'),close=$('<a id="fancybox-close"></a>'),title=$('<div id="fancybox-title"></div>'),nav_left=$('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),nav_right=$('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));close.click($.fancybox.close);loading.click($.fancybox.cancel);nav_left.click(function(e){e.preventDefault();$.fancybox.prev();});nav_right.click(function(e){e.preventDefault();$.fancybox.next();});if($.fn.mousewheel){wrap.bind('mousewheel.fb',function(e,delta){if(busy){e.preventDefault();}else if($(e.target).get(0).clientHeight==0||$(e.target).get(0).scrollHeight===$(e.target).get(0).clientHeight){e.preventDefault();$.fancybox[delta>0?'prev':'next']();}});}
if(!$.support.opacity){wrap.addClass('fancybox-ie');}
if(isIE6){loading.addClass('fancybox-ie6');wrap.addClass('fancybox-ie6');$('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||'')?'javascript:void(false)':'about:blank')+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(outer);}};$.fn.fancybox.defaults={padding:10,margin:40,opacity:false,modal:false,cyclic:false,scrolling:'auto',width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:'transparent'},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:0.7,overlayColor:'#777',titleShow:true,titlePosition:'float',titleFormat:null,titleFromAlt:false,transitionIn:'fade',transitionOut:'fade',speedIn:300,speedOut:300,changeSpeed:300,changeFade:'fast',easingIn:'swing',easingOut:'swing',showCloseButton:true,showNavArrows:true,enableEscapeButton:true,enableKeyboardNav:true,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};$(document).ready(function(){$.fancybox.init();});})(jQuery);